# 产品16：社区共享微型康复机器人驿站（详细设计实现文档）

## 0. 文档信息
- 版本：v1.0
- 目标：通过“共享+服务网络”降低康复设备使用门槛
- 适用场景：社区驿站、术后短中期家庭康复

## 1. 建设目标
1. 让居民按需租用康复机器人而非一次性高价购买。
2. 建立“预约-取机-训练-归还-消杀”闭环。
3. 通过数据化调度提升设备利用率与服务效率。

## 2. 范围边界
- **In Scope**：租赁系统、设备自检、上门指导、消杀追溯。
- **Out of Scope**：医院治疗方案制定、复杂住院级康复。

## 3. 功能需求
### Must
- FR-01：设备预约与驿站取还流程。
- FR-02：出库前自检、归还后消杀校准。
- FR-03：使用过程监测与异常停机保护。

### Should
- FR-04：康复进度追踪。
- FR-05：上门指导工单系统。

### Could
- FR-06：保险支付直连。

## 4. 非功能指标
- 设备利用率 > 60%。
- 平均出库准备时长 < 20min。
- 消杀记录完整率 100%。

## 5. 总体架构
```text
社区驿站柜机 + 模块化康复机器人
   -> 云调度平台(订单/工单/库存)
      -> 康复课程系统 + 运维系统
```

## 6. 硬件设计
- 模块化机器人：上肢/下肢可切换模块。
- 自检底座：电机、电池、传感器一键检测。
- RFID追踪：设备生命周期管理。
- 驿站柜机：取还机位与身份校验。

## 7. 软件模块
1. `RentalOrderService`：预约、支付、押金。
2. `DispatchOptimizer`：供需预测与调度。
3. `DeviceHealthMonitor`：出入库健康状态。
4. `SanitizeTraceService`：消杀流程留痕。
5. `CoachWorkOrder`：上门指导安排。

## 8. 数据模型
- `RentalOrder { user_id, device_type, period, status }`
- `DeviceHealth { sn, battery, fault_flags, calibration_status }`
- `SanitizeLog { method, operator, start_ts, end_ts }`
- `TrainingSummary { user_id, sessions, adherence }`

## 9. 策略设计
- 调度策略：时段热度 + 地理距离 + 设备状态联合优化。
- 风控策略：逾期未还、异常跌落、超负荷使用告警。
- 维保策略：按累计工时触发预防性维护。

## 10. 接口定义
- `POST /api/v1/rental/order/create`
- `POST /api/v1/device/checkin`
- `POST /api/v1/device/checkout`
- `GET /api/v1/device/health/{sn}`
- `POST /api/v1/sanitize/log`

## 11. 交互流程
1. 用户App预约设备与时间。
2. 驿站取机，系统核验身份并下发教程。
3. 家庭训练过程自动记录。
4. 归还后自动检测与消杀，完成结算。

异常流程：
- 设备故障自动锁机并切换备机配送。

## 12. 安全与合规
- 使用边界提示与风险告知。
- 训练数据去标识化。
- 设备责任归属记录与审计保留。

## 13. 测试与验收
- 驿站吞吐压力测试。
- 设备周转与故障恢复测试。
- 验收：故障率<2%，准时交付率>95%。

## 14. 实施计划
- P1：单社区样板（50台以内）。
- P2：跨社区调度联动。
- P3：连锁化运营与保险协同。

## 15. 风险与缓解
- 风险：设备损耗高。  
  缓解：押金+保险+耐久设计。
- 风险：取还流程复杂。  
  缓解：扫码一步取机 + 语音引导。
