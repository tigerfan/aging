# 产品27：卒中后上肢复健数字教练台（详细设计实现文档）

## 0. 文档信息
- 版本：v1.0
- 目标对象：卒中后上肢功能受限老人
- 目标：将居家训练从“机械重复”升级为“任务化康复”

## 1. 建设目标
1. 提供生活化任务（拧瓶盖、扣扣子）训练。
2. 实时动作纠偏与疲劳保护。
3. 形成治疗师远程批注与进阶处方闭环。

## 2. 范围边界
- **In Scope**：动作捕捉、评分、处方执行、远程批注。
- **Out of Scope**：急性期临床治疗替代。

## 3. 功能需求
### Must
- FR-01：动作轨迹捕捉与误差分析。
- FR-02：实时纠偏反馈。
- FR-03：阶段目标与达成追踪。

### Should
- FR-04：治疗师远程批注。
- FR-05：家庭协作任务。

### Could
- FR-06：游戏化挑战机制。

## 4. 非功能指标
- 动作反馈延迟 < 100ms。
- 训练依从率提升 > 30%。
- 设备安全可用率 >= 99%。

## 5. 总体架构
```text
教练台硬件(抓握/旋钮/触控/视觉)
   -> 训练引擎(纠偏+评分)
      -> 康复App + 治疗师平台
```

## 6. 硬件设计
- 力反馈旋钮：模拟旋拧任务阻力。
- 抓握模块：力量与稳定性训练。
- 触控面板：精细触达训练。
- 视觉追踪：手部轨迹采集。

## 7. 软件模块
1. `TaskPrescriptionManager`：任务处方管理。
2. `MotionAnalyzer`：轨迹误差与节律分析。
3. `RealtimeCorrection`：实时纠偏提示。
4. `FatigueGuard`：疲劳检测与降强度。
5. `TherapistReviewPortal`：远程批注。

## 8. 数据模型
- `UpperLimbTrace { ts, points[], smoothness }`
- `GripForceSeries { ts, value }`
- `CorrectionEvent { type, severity, suggestion }`
- `WeeklyRehabReport { progress, adherence, next_goal }`

## 9. 算法策略
- 误差度量：轨迹偏差、速度波动、任务完成时长。
- 疲劳判定：动作质量下降 + 力输出衰减联合识别。
- 进阶策略：达到阈值后自动提升难度。

## 10. 接口定义
- `POST /api/v1/rehab/task/assign`
- `POST /api/v1/rehab/motion/upload`
- `GET /api/v1/rehab/weekly-report`
- `POST /api/v1/rehab/therapist/comment`

## 11. 交互流程
1. 用户开始训练任务。
2. 系统实时纠偏并记录过程。
3. 达到疲劳阈值自动建议休息。
4. 周报同步治疗师并下发下一阶段计划。

## 12. 安全与合规
- 动作边界限制防止过拉伸。
- 医疗数据分级访问与加密存储。
- 输出为康复建议，不替代门诊复评。

## 13. 测试与验收
- 硬件耐久与精度测试。
- 康复师对照评分一致性测试。
- 验收：FMA-UE阶段改善，依从率提升>30%。

## 14. 实施计划
- P1：院内-院外连续康复试点。
- P2：家庭版标准化包。
- P3：治疗师协作网络扩展。

## 15. 风险与缓解
- 风险：训练枯燥导致中断。  
  缓解：生活化任务与进阶奖励。
