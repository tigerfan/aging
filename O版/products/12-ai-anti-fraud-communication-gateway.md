# 产品12：AI反诈通信网关终端（详细设计实现文档）

## 0. 文档信息
- 版本：v1.0
- 适用对象：独居老人、高诈骗暴露家庭
- 建设目标：在“通话进行时”完成反诈风险识别与干预

## 1. 项目目标
1. 流式识别高风险诈骗话术。
2. 提供冷静期与家属协同确认机制。
3. 在降低被骗风险同时减少误拦影响。

## 2. 范围边界
- **In Scope**：风险识别、提醒、冷静期、协同确认、样本回流。
- **Out of Scope**：执法取证系统、金融机构风控替代。

## 3. 功能需求
### Must
- FR-01：通话实时ASR与风险打分。
- FR-02：风险分级提醒（R1~R4）。
- FR-03：R3以上触发冷静期与转账延迟建议。

### Should
- FR-04：家属二次确认流。
- FR-05：误报反馈与模型迭代。

### Could
- FR-06：社区民警协同接口。

## 4. 非功能指标
- 检测延迟 < 1.2s。
- 高风险识别召回率 > 90%。
- 误拦率 < 3%。
- 关键策略可回滚时间 < 5min。

## 5. 架构设计
```text
语音网关盒 + 手机插件
   -> 端侧小模型(实时检测)
      -> 云端复判服务(高风险)
         -> 家属协同App/策略中心
```

## 6. 硬件/端能力
- 网关盒：通话音频接入与本地提示。
- 一键求助键：快速联系可信联系人。
- 手机插件：兼容主流通话入口。

## 7. 软件模块
1. `StreamASR`：实时转写。
2. `FraudClassifier`：话术与情境风险识别。
3. `RiskPolicyEngine`：分级干预策略。
4. `FamilyConfirmFlow`：家属确认链路。
5. `FeedbackLoop`：误报/漏报样本闭环。

## 8. 数据模型
- `CallRiskEvent { call_id, risk_level, reasons[] }`
- `CooldownAction { duration_sec, trigger }`
- `FamilyConfirmTicket { status, approver, ts }`
- `PatternVersion { version, publish_time }`

## 9. 算法与策略
- 关键词、语义模式、对话节奏联合建模。
- 高风险语义命中 + 金钱操作意图 = 强提醒。
- 渐进式干预：先提示，再冷静期，再协同确认。

## 10. 接口定义
- `POST /api/v1/call/risk/evaluate`
- `POST /api/v1/call/cooldown/start`
- `POST /api/v1/family/confirm/request`
- `POST /api/v1/feedback/report`

## 11. 交互流程
1. 通话开始，端侧持续打分。
2. 风险升高弹出大字提示与语音提醒。
3. 触发冷静期并建议暂缓转账。
4. 用户可发起家属确认后再决策。

异常流程：
- 网络不可用时仅用端侧模型，保证基础防护。

## 12. 安全与合规
- 默认不保存通话全文。
- 仅授权后保存加密片段用于举证。
- 提示文案可解释，避免“黑盒误伤”。

## 13. 测试与验收
- 诈骗样本回放测试。
- 老年用户可用性测试（字体、语音、流程长度）。
- 验收：高风险召回>90%，误拦<3%。

## 14. 实施计划
- P1：语音电话场景。
- P2：视频通话平台接入。
- P3：保险联动与城市反诈协作。

## 15. 风险与缓解
- 风险：误拦造成用户反感。  
  缓解：渐进式干预，不强制中断。
- 风险：诈骗话术快速变种。  
  缓解：样本日更 + 规则热更新。
