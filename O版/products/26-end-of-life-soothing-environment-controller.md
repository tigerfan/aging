# 产品26：末期关怀舒缓环境控制器（详细设计实现文档）

## 0. 文档信息
- 版本：v1.0
- 目标：为安宁疗护家庭提供可执行、可复用的舒缓环境方案
- 适用对象：居家末期关怀老人及家属

## 1. 建设目标
1. 提供一键式舒缓场景（光、声、温湿、节律）。
2. 减轻家属照护负担并提升照护一致性。
3. 支持远程护士协作，不替代医疗决策。

## 2. 范围边界
- **In Scope**：环境编排、症状记录、护理提醒、远程协作。
- **Out of Scope**：治疗方案决策、药物管理替代。

## 3. 功能需求
### Must
- FR-01：舒缓场景一键切换。
- FR-02：症状日记与照护记录。
- FR-03：家属照护提示与夜间低打扰模式。

### Should
- FR-04：护士端远程查看与调整建议。
- FR-05：家庭成员协同记录。

### Could
- FR-06：生命回顾内容播放。

## 4. 非功能指标
- 场景切换延迟 < 2s。
- 离线可执行基础场景。
- 数据访问审计完整率 100%。

## 5. 总体架构
```text
床旁控制器 + 呼吸雷达 + 光声温湿执行器
   -> 舒缓场景引擎
      -> 家属App + 护士协作端
```

## 6. 硬件设计
- 呼吸雷达：非接触节律感知。
- 可调光源：色温与亮度平滑控制。
- 音频模块：白噪/舒缓音乐播放。
- 温湿执行模块：基础舒适环境保持。

## 7. 软件模块
1. `ComfortSceneEngine`：场景模板编排。
2. `SymptomDiaryService`：症状记录与趋势展示。
3. `CareHintEngine`：照护提示与节律提醒。
4. `NurseCollabBridge`：远程协作接口。

## 8. 数据模型
- `ComfortScene { id, params, active_state }`
- `SymptomDiary { ts, symptom_type, intensity, notes }`
- `CareActionLog { actor, action, ts }`
- `NurseAdjustmentOrder { recommendation, status }`

## 9. 策略设计
- 场景模板：平静、夜间、焦虑缓解、会客。
- 触发策略：手动优先，趋势辅助建议。
- 决策边界：仅提醒，不输出治疗结论。

## 10. 接口定义
- `POST /api/v1/comfort/scene/activate`
- `POST /api/v1/comfort/symptom/log`
- `GET /api/v1/comfort/diary/trend`
- `POST /api/v1/comfort/nurse/recommend`

## 11. 交互流程
1. 家属选择或系统建议舒缓场景。
2. 环境参数自动调节并记录。
3. 症状变化可一键记录并共享护士端。
4. 护士给出远程调整建议。

## 12. 安全与合规
- 高敏数据最小化共享。
- 所有访问行为可审计。
- 伦理提示明确：尊重患者意愿与家庭决策。

## 13. 测试与验收
- 场景切换稳定性测试。
- 照护流程可用性测试。
- 验收：家属照护负担自评下降，场景可用率>95%。

## 14. 实施计划
- P1：安宁疗护团队共建模板。
- P2：家庭试点与反馈优化。
- P3：机构协作网络化部署。

## 15. 风险与缓解
- 风险：情绪负担重导致弃用。  
  缓解：简化交互 + 心理支持入口。
