# 产品04：吞咽安全智能餐具系统（详细设计实现文档）

## 0. 文档信息
- 文档版本：v1.0
- 适用人群：卒中后吞咽障碍、帕金森吞咽风险人群
- 核心目标：降低误吸与呛咳事件，标准化居家进食照护

## 1. 目标与边界
### 1.1 目标
1. 提供吞咽节律监测与风险前兆识别。
2. 给出实时进食节奏、勺量、体位建议。
3. 支持康复师远程配置个体化参数。

### 1.2 边界
- **In Scope**：监测、提醒、记录、随访。
- **Out of Scope**：急救替代、医疗诊断结论。

## 2. 场景与用户
- 家庭午晚餐高风险时段。
- 护理员经验不足或交接不一致场景。
- 远程康复随访需要量化数据。

## 3. 功能规格
### Must
- FR-01：吞咽事件实时检测。
- FR-02：过快进食与呛咳前征兆提醒。
- FR-03：每餐风险记录与追踪。

### Should
- FR-04：康复师远程调参与处方下发。
- FR-05：护理任务卡生成。

### Could
- FR-06：吞咽训练模式与阶段目标。

## 4. 非功能指标
- 检测延迟 < 300ms。
- 吞咽识别灵敏度 > 92%。
- 误报警率 < 8%。
- 设备连续续航 >= 8小时。

## 5. 系统架构
```text
智能勺叉(IMU/微压) + 喉部柔性贴片
     -> 本地融合引擎
         -> 护理平板/康复师平台
             -> 报告与任务系统
```

## 6. 硬件设计
- 勺柄IMU：检测抬手角度、速度、停顿。
- 微压传感：估算勺量变化。
- 喉部柔性贴片：采集喉振与吞咽波形。
- 提醒模块：低延迟震动/蜂鸣双模。

## 7. 软件模块
1. `MealSessionManager`：餐次会话管理。
2. `SwallowDetector`：吞咽检测与置信融合。
3. `RiskGrader`：风险分级（低/中/高）。
4. `RealtimeCueEngine`：节奏提醒与体位提示。
5. `RemoteConfigService`：康复师参数下发。

## 8. 数据模型
- `BiteEvent { ts, spoon_angle, volume_est }`
- `SwallowEvent { ts, waveform_score, confidence }`
- `CoughRiskAlert { level, trigger_features }`
- `MealReport { pace_score, risk_count, suggestions }`

## 9. 算法设计
### 9.1 多模态融合
- 声学（喉振） + 动作（勺姿态）早期融合。
- 对弱信号阶段启用时序平滑，减少抖动误判。

### 9.2 风险策略
- 吞咽间隔小于阈值（默认18秒）连续3次 -> 中风险。
- 呛咳前征兆特征命中 -> 高风险，触发暂停指令。

## 10. 接口定义
- `POST /api/v1/swallow/param/update`
- `GET /api/v1/swallow/meal-report?user_id=&date=`
- `POST /api/v1/swallow/alert/ack`

## 11. 交互流程
1. 用户佩戴贴片并开始进食。
2. 设备自动识别每勺与吞咽节律。
3. 风险升高时震动提示“放慢/调整体位”。
4. 餐后生成简报并同步护理端。

异常流程：
- 贴片脱落或接触不良：立即提示重新佩戴并标记数据无效段。

## 12. 安全与合规
- 食品接触材料需通过相关安全标准。
- 设备不输出“治疗结论”，仅输出风险提醒。
- 数据去标识化，医疗数据分级授权。

## 13. 测试与验收
- 模拟餐次测试：不同稠度食物全覆盖。
- 佩戴稳定性测试：日常活动下连续监测。
- 临床合作验证：康复科对照评估。

验收门槛：
- 干预后呛咳事件率下降 > 30%。
- 餐次报告可用率 >= 95%。

## 14. 实施路径
- P1：康复科封闭测试（8周）。
- P2：家庭试点（30户，12周）。
- P3：标准护理包商业化。

## 15. 风险与缓解
- 风险：佩戴不规范导致误判。  
  缓解：佩戴检测 + 教学视频 + 首次校准流程。
- 风险：提醒过于频繁影响进食体验。  
  缓解：个体阈值自适应与提醒节流。
