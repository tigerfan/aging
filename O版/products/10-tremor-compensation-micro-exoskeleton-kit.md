# 产品10：手抖补偿微外骨骼餐写套件（详细设计实现文档）

## 0. 文档信息
- 版本：v1.0
- 目标用户：帕金森与特发性震颤老人
- 产品目标：以主动补偿替代被动配重，提升精细动作可执行性

## 1. 建设目标与边界
### 1.1 目标
1. 在进食与书写场景下实时抵消震颤。
2. 建立快速个体化标定流程。
3. 兼顾稳定效果与佩戴舒适度。

### 1.2 边界
- **In Scope**：震颤检测、实时补偿、任务评分。
- **Out of Scope**：神经疾病诊断、药效评估。

## 2. 功能需求
### Must
- FR-01：4~8Hz震颤频段实时检测。
- FR-02：逆向补偿控制输出。
- FR-03：场景模式切换（吃饭/写字）。

### Should
- FR-04：快速个体化标定向导。
- FR-05：训练数据记录与趋势查看。

### Could
- FR-06：远程康复师参数建议。

## 3. 非功能指标
- 整机重量 < 120g。
- 连续续航 > 6h。
- 控制闭环延迟 < 50ms。

## 4. 总体架构
```text
手背IMU + 指套执行器
   -> 本地控制固件(LQR/MPC)
      -> 手机App(模式/标定/报告)
```

## 5. 硬件设计
- IMU：高采样频率捕捉震颤频带。
- 微型执行器：低噪、低延迟输出。
- 柔性连杆：保证活动范围与佩戴舒适。
- 快拆电池：便于日常维护。

## 6. 软件模块
1. `TremorDetector`：频谱识别与幅值估计。
2. `CompensationController`：LQR/MPC控制输出。
3. `ModeManager`：场景参数模板切换。
4. `CalibrationWizard`：个体标定。
5. `TaskScorer`：餐写任务质量评估。

## 7. 数据模型
- `TremorProfile { freq_peak, amplitude, variability }`
- `CompensationGain { mode, gain_vector, updated_at }`
- `TaskScore { scene, success_rate, smoothness }`

## 8. 算法策略
- 频域检测：FFT定位震颤主峰。
- 控制策略：按幅值动态调节增益。
- 稳定约束：力矩上限 + 温升限制双安全阈值。

## 9. 接口定义
- `POST /api/v1/exo/calibration/start`
- `POST /api/v1/exo/mode/switch`
- `GET /api/v1/exo/task-report`

## 10. 交互流程
1. 首次佩戴进入标定流程（2~3分钟）。
2. 用户选择进食或书写模式。
3. 系统实时补偿并显示任务评分。
4. 每日生成使用与稳定性报告。

异常流程：
- 温升过高/力矩异常时，自动降级并提示休息。

## 11. 安全与合规
- 过力保护与紧急解锁按钮。
- 不采集面部数据，动作数据本地优先。
- 医疗相关文案为辅助说明，不作疗效承诺。

## 12. 测试与验收
- 台架测试：频段覆盖、延迟、稳定性。
- 场景测试：汤勺、筷子、签字笔任务。
- 验收指标：洒漏率下降>40%，书写可读度提升>30%。

## 13. 实施计划
- P1：进食模式上线。
- P2：书写模式与评分体系。
- P3：康复协作端联动。

## 14. 风险与缓解
- 风险：个体差异导致初始效果波动。  
  缓解：分层标定模板 + 在线微调。
- 风险：长时间佩戴疲劳。  
  缓解：轻量化结构与间歇提醒。
