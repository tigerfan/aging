# P25 智慧餐桌——老年营养感知辅助进食系统

---

## A. 需求分析文档

### 1. 产品概述与定位

**智慧餐桌**是一套通过AI视觉识别和智能餐具，实现老年人营养摄入实时分析、咀嚼吞咽监测和进食行为辅助的居家营养管理系统。核心产品为带有重量传感器的智能餐垫+摄像头识别模块，饭前拍照自动识别食物种类和分量，饭后称量计算实际摄入；配合咀嚼分析勺（内置IMU+接触传感），监测进食速度和吞咽异常，为老年人营养不良和吞咽障碍提供居家级主动管理工具。

**蓝海点**：老年营养不良患病率高达30–50%，是跌倒/住院/死亡率升高的独立危险因素；吞咽障碍（Dysphagia）影响约20%老年人，居家监测工具几乎为零；AI食物识别技术成熟（薄荷健康等APP验证），结合硬件重量传感可大幅提升准确性。

### 2. 目标用户画像

| 维度 | 描述 |
|------|------|
| 核心用户 | 70–85岁，有食欲不振、体重下降、吞咽困难症状的老年人 |
| 次要用户 | 脑卒中后吞咽障碍患者，帕金森患者（进食动作障碍），痴呆患者（忘记吃饭） |
| 照护人 | 独居老人的家庭成员，养老院营养师，居家护理员 |
| 医疗背景 | 营养科医生、言语治疗师（吞咽障碍管理）、老年科医生 |

### 3. 市场痛点与机会

- 中国住院老年人营养不良率超50%，社区老年人营养不良率约30%
- 医疗机构营养师极缺（全国仅约1万名注册营养师），居家营养管理空白
- 吞咽障碍（卒中/帕金森后遗症）：传统评估须去医院做吞咽造影，居家监测无工具
- 老年人进食太快/太少/食物种类单一，家属难以持续监督
- 智能家居（智能电冰箱等）已验证食物AI识别的可行性和用户接受度

### 4. 功能性需求（FR）

**FR-01 食物识别与营养计算**
- 桌面摄像头：俯视角度拍摄餐盘，AI识别食物种类（识别库>5,000种中国菜肴）
- 智能餐垫：四角重量传感器，精确测量每道菜的初始重量和进食后剩余重量
- 营养计算：蛋白质、碳水、脂肪、热量、关键微量元素（钙、铁、锌）
- 每餐摄入量自动生成，与推荐量对比（老年版DRI标准）

**FR-02 进食行为监测（智能勺）**
- 智能勺内置9轴IMU：检测每次舀食、入口、放勺动作
- 进食速度：每分钟入口次数，超过20次/分钟（进食过快）提醒减速
- 吞咽监测：喉部贴片式加速度计（可选配件）：检测甲状软骨上下运动（吞咽动作）
- 吞咽异常标志：吞咽时间>2秒、咀嚼后未吞咽（滞留）→ 提醒家属

**FR-03 营养状态追踪**
- 每日三餐自动汇总，推送家属
- 周度营养分析：热量摄入趋势、蛋白质/碳水比例、缺乏的营养素提示
- 体重追踪联动（连接体重秤或手动录入）
- MNA（微型营养评估）简化版：月度自动评估营养风险等级

**FR-04 进食辅助提醒**
- 忘记进食提醒（痴呆老人）：到饭点无进食行为 → 语音/灯光提醒
- 饮水追踪：智能水杯联动，确保每日饮水量>1,500ml
- 特殊饮食提醒：肾病老人提示低蛋白，糖尿病老人提示低GI食物选择

**FR-05 营养师远程干预**
- 导出营养摄入报告（按营养学标准格式）
- 线上营养师可基于数据制定个性化饮食计划
- 计划推送：APP显示本周饮食建议（"本周钙摄入不足，建议增加牛奶或豆腐"）

### 5. 非功能性需求（NFR）

| 维度 | 指标 |
|------|------|
| 食物识别准确率 | 常见家常菜>90%，中式快餐>85% |
| 重量传感精度 | ±2g（单道菜摄入量） |
| 进食速度检测延迟 | <1秒（实时反馈） |
| 摄像头隐私 | 仅进行本地图像识别，食物图像不上传云端（只上传营养数据） |
| 餐垫清洗 | 硅胶防水表面，可直接水洗（传感器密封防水） |
| 智能勺清洗 | 勺头可拆卸清洗，主体IPX6防水（勺头+勺柄分离设计） |

### 6. 约束条件与合规要求

- 产品定位为营养管理工具，非医疗器械（避免复杂注册）
- 吞咽障碍监测功能须标注：发现异常建议就医，不作诊断
- 摄像头食物识别：图像本地处理，不上传个人照片，保护老人进餐隐私
- 营养数据：仅用于个人营养管理，不用于任何第三方分析

---

## B. 详细设计方案

### 1. 系统架构

```
[智慧餐桌系统]
     ├── 桌面摄像头（食物识别，本地推理）
     ├── 智能餐垫（重量传感×4角）
     ├── 智能勺（IMU+接触传感）
     └── 可选：喉部加速度计（吞咽监测）
          │ WiFi/BLE
          ▼
[手机APP]
     ├── 实时营养仪表盘
     ├── 进食行为记录
     ├── 家属营养报告
     └── 营养师连接
          ▼
[云端服务]
     ├── 营养数据库（USDA+中国食物成分表）
     ├── 营养趋势分析
     └── 营养师平台
```

### 2. 硬件设计方案

**2.1 智能餐垫**
- 四角压力传感器：HX711+应变梁，精度±1g，量程0–5kg
- 餐垫尺寸：45cm×35cm（覆盖标准餐桌一人用餐区域）
- 材质：硅胶表面，防水防滑，可机洗
- 独立餐碗定位区：4个凹槽（固定碗的位置，对应4个传感区）
- 内置WiFi模组（ESP32），传输重量数据

**2.2 桌面摄像头（识别台）**
- 位置：餐垫正上方30cm高度（独立支架），俯视覆盖整个餐垫
- 相机：200万像素RGB+深度相机（估算食物体积）
- 边缘AI：内置Rockchip NPU，本地运行YOLOv8-seg（食物分割）
- 光源：环形补光灯（统一照明，减少颜色偏差）

**2.3 智能勺**
- 勺头：食品级PP材料，可拆卸（沸水消毒）
- 勺柄：嵌入MPU-6050（6轴IMU，采样率100Hz）+ 应变计（接触压力）
- 通信：BLE 5.0（连接餐桌主控或手机）
- 续航：CR2032钮扣电池，每餐使用30–60分钟，续航6个月

**2.4 喉部加速度计（可选配件）**
- 贴片式：双面粘附颈前，正对喉结
- 传感器：ADXL345（3轴加速度计，采样率200Hz）
- 通信：BLE 5.0，实时流式传输
- 清洗：防水设计，酒精擦拭消毒

### 3. 核心算法设计

**3.1 食物识别与营养估算**
```python
def identify_and_estimate_nutrition(image, weight_grams):
    # YOLOv8分割：识别餐盘中每种食物及其区域
    detections = yolov8_seg.predict(image)
    
    nutrition_total = {}
    for detection in detections:
        food_name = detection.class_name
        area_ratio = detection.mask_area / total_plate_area
        
        # 用重量传感器数据修正（更精准）
        food_weight = weight_grams * area_ratio  # 按面积比例分配重量
        
        # 查询营养数据库
        nutrition_per_100g = food_db.lookup(food_name)
        nutrition = {k: v * food_weight/100 
                    for k, v in nutrition_per_100g.items()}
        nutrition_total = add_nutrition(nutrition_total, nutrition)
    
    return nutrition_total

def compute_meal_intake(before_weight, after_weight, before_nutrition):
    intake_ratio = (before_weight - after_weight) / before_weight
    actual_nutrition = {k: v * intake_ratio 
                       for k, v in before_nutrition.items()}
    return actual_nutrition
```

**3.2 进食速度分析（智能勺IMU）**
```python
def analyze_eating_speed(imu_data, fs=100):
    # 检测勺的入口动作（角速度峰值序列）
    gyro_norm = np.linalg.norm(imu_data[:, 3:6], axis=1)
    peaks, _ = find_peaks(gyro_norm, height=0.5, distance=fs//2)
    
    eating_rate = len(peaks) / (len(imu_data)/fs) * 60  # 次/分钟
    return eating_rate

def detect_swallowing(acc_data, fs=200):
    # 检测喉部加速度：吞咽时甲状软骨产生特征振动
    acc_z = acc_data[:, 2]
    envelope = np.abs(hilbert(acc_z))
    swallow_events = find_peaks(envelope, height=0.2, distance=fs//2)
    swallow_durations = compute_event_durations(swallow_events, acc_z)
    long_swallows = [d for d in swallow_durations if d > 2.0]  # >2秒为异常
    return len(swallow_events[0]), len(long_swallows)
```

### 4. 用户交互设计

**进餐流程**
```
将食物放上智能餐垫 → 系统自动拍照识别
→ APP显示："今日午餐识别完成：米饭100g、红烧肉80g、青菜150g"
→ 实时营养预览："热量预计580kcal，蛋白质28g"
→ 进餐（智能勺自动追踪进食速度）
→ 进餐结束取走碗 → 系统计算实际摄入量
→ 推送："今日午餐实际摄入：热量420kcal，蛋白质不足，建议晚餐补充鸡蛋或豆腐"
```

**家属APP界面**
- 三餐卡片：今日早/中/晚餐图片+营养概况
- 周营养图表：雷达图显示各营养素达标率
- 告警（营养不足连续3天）："妈妈本周蛋白质摄入持续偏低，建议关注"

### 5. 商业化路径与技术风险

**商业化路径**
- **标准套装**（餐垫+摄像头+智能勺）：1,380元；**高级套装**（含喉部加速度计）：1,780元
- **服务**：营养师线上咨询，99元/次；月度营养订阅，49元/月（自动分析+建议）
- **渠道**：营养科/老年科医院推荐，养老院批量采购（护理信息化）
- **保险合作**：长期护理险配套营养管理工具

**技术风险评估**

| 风险 | 等级 | 应对措施 |
|------|------|----------|
| 混合菜肴识别困难（炒合菜、火锅） | 高 | 用户可手动补充修正，重量传感器确保总量准确 |
| 老年人不愿用摄像头（隐私担忧） | 中 | 强调本地识别不上传照片，提供可手动录入食物的替代方案 |
| 智能勺清洗时传感器进水 | 中 | 勺头勺柄磁吸分离，勺头可沸水消毒，勺柄仅擦拭（IPX6） |
| 家庭成员共用餐桌（非老人食物被识别） | 低 | 设置"老人专属区域"（餐垫自动识别），其他区域不纳入统计 |
