# P22 情绪晴雨表——多模态情绪监测预警系统

---

## A. 需求分析文档

### 1. 产品概述与定位

**情绪晴雨表**是一套面向老年人心理健康管理的多模态情绪监测系统，通过智能音箱（采集语音韵律特征）、可穿戴腕带（采集心率变异性HRV）和日常对话交互，持续感知老人的情绪状态，识别抑郁、焦虑的早期信号，及时推送家属和医护人员介入。其核心理念是"无感监测"——老年人不需要主动填写量表，系统在自然交互中完成情绪评估。

**蓝海点**：老年抑郁症漏诊率超80%；现有情绪监测设备面向职场人士（非老年）；语音情绪识别+HRV多模态融合的老年心理健康产品市场空白。

### 2. 目标用户画像

| 维度 | 描述 |
|------|------|
| 核心用户 | 70–85岁，独居或空巢，有抑郁/焦虑风险（如丧偶、慢病等） |
| 次要用户 | 轻中度认知障碍老年人（情绪变化往往早于认知变化） |
| 家属 | 担心父母情绪状态，希望及早发现问题 |
| 医护 | 社区精神科护士、全科医生，希望有家庭情绪监测工具辅助随访 |

### 3. 市场痛点与机会

- 老年抑郁症是仅次于心血管病的老年人致残主因，但识别率极低
- 老年人主动就医意识弱，情绪问题常被认为是"年纪大了正常"
- PHQ-9等量表需要定期主动填写，依从性差，老年人接受度低
- 语音情绪识别（SER）技术成熟度提升，中文老年人语音数据集逐渐丰富
- 家属和医护需要"客观指标"才有介入理由，主观感受不足以驱动就医

### 4. 功能性需求（FR）

**FR-01 语音情绪识别**
- 智能音箱每日2次主动对话（早晨/晚间）：简短问候+情绪感知对话
- 采集语音特征：语速、音调、语气、停顿时间、回应延迟
- SER模型：识别6种情绪状态（快乐/平静/悲伤/焦虑/愤怒/淡漠）
- 连续监测：每日情绪评分（0–100，越高越积极）

**FR-02 生理情绪监测（腕带）**
- 24小时HRV监测：RMSSD指标，自主神经系统状态反映情绪调节能力
- 皮肤电导（EDA）：情绪激活程度（焦虑时EDA升高）
- 睡眠质量追踪：深睡比例、睡眠效率（与抑郁状态高度相关）

**FR-03 行为指标分析**
- 活动量：步数骤降（连续3天步数<1,000步，远低于基线）
- 社交互动：与家人通话频率（相框/手机记录）
- 食欲代理：餐前体重/厨房活动规律（与P24居家传感器联动可选）
- 昼夜节律：起床时间、日间小睡时长变化

**FR-04 抑郁风险综合评估**
- 多模态融合评分：语音情绪(40%) + HRV(30%) + 行为指标(30%)
- 风险等级：绿（正常）→ 黄（关注）→ 橙（预警）→ 红（需干预）
- 连续7天黄色以上：推送家属+社区精神科护士
- 数字化PHQ-9/GDS-15量表：月度自评（AI语音问卷形式，降低负担）

**FR-05 干预引导**
- 轻度干预：每日积极情感激活（美好回忆引导，P03时光相框联动）
- 中度干预：推荐VR花园（P19）使用，音乐疗法推送
- 严重预警：推送家属上门探视提醒，社区精神科护士随访提醒
- 危机干预：检测到明显绝望/死亡相关语言，立即通知家属和急救联系人

### 5. 非功能性需求（NFR）

| 维度 | 指标 |
|------|------|
| 语音情绪识别准确率 | 6分类≥75%（自然对话场景，非实验室） |
| 响应自然度 | 情绪识别对话不让老人感到被"监视"，对话自然流畅 |
| 隐私保护 | 语音仅提取情绪特征，不存储原始录音（或本地处理） |
| 误报率 | 假阳性（误报抑郁）<10%（避免家属过度恐慌） |
| 腕带续航 | ≥7天（减少充电频率） |
| 全天可用性 | 离线时继续记录，联网后同步 |

### 6. 约束条件与合规要求

- 情绪监测数据：严格按医疗数据保护标准处理，不用于任何商业用途
- 危机干预：产品不提供心理危机直接干预，仅负责告警并引导寻求专业帮助
- "监视感"问题：须明确告知老人和家属监测内容，老人同意后方可启用
- 语音原始数据：告知不留存，仅保留情绪特征向量（无法反推内容）

---

## B. 详细设计方案

### 1. 系统架构

```
[情绪晴雨表传感层]
     ├── 智能音箱（语音对话+SER）
     └── 情绪腕带（HRV+EDA+睡眠）
          │ WiFi/BLE
          ▼
[边缘融合层（音箱主控）]
     ├── 多模态情绪融合评分
     ├── 行为指标计算
     └── 风险等级判定
          │ HTTPS
          ▼
[云端服务]
     ├── 情绪趋势数据库
     ├── 抑郁风险预测模型（LSTM）
     └── 干预资源推荐引擎
          ▼
[家属/医护APP]
     ├── 情绪趋势仪表盘
     ├── 预警通知
     └── 干预记录
```

### 2. 硬件设计方案

**2.1 情绪智能音箱**
- 主控：Rockchip RK3566（支持边缘AI推理）
- 麦克风：6麦克风环形阵列（降噪，拾音距离5m）
- 扬声器：10W全频，温暖音色（老年人语音清晰度优化）
- 显示：3.5英寸圆形彩屏（情绪状态可视化：晴天/多云/小雨等天气图案）
- 唤醒词：无需唤醒，对话时间自动触发（早晨7–9点/晚上7–9点）

**2.2 情绪腕带**
- PPG：MAX30102（心率+HRV+SpO2）
- EDA：皮肤电导两点测量（内侧腕部两个Ag/AgCl电极）
- IMU：6轴（活动量+睡眠体位）
- 续航：7天（BLE间歇性传输省电）
- 外观：轻量运动腕带风格（<30g），磁吸充电

### 3. 核心算法设计

**3.1 语音情绪特征提取**
```python
def extract_speech_emotion_features(audio_segment):
    # 韵律特征
    pitch = extract_f0(audio_segment)           # 基频（音调）
    energy = compute_rms_energy(audio_segment)  # 能量（音量）
    tempo = detect_speech_rate(audio_segment)   # 语速（音节/秒）
    pause_ratio = compute_pause_ratio(audio_segment)  # 停顿比例
    
    # 频谱特征
    mfcc = extract_mfcc(audio_segment, n_mels=13)  # 梅尔频率倒谱系数
    
    # 组合特征向量
    features = np.concatenate([
        [np.mean(pitch), np.std(pitch)],
        [np.mean(energy), np.std(energy)],
        [tempo, pause_ratio],
        mfcc.flatten()
    ])
    return features

def classify_emotion(features, model):
    return model.predict_proba(features)  # 6类情绪概率
```

**3.2 多模态抑郁风险评估**
```python
def assess_depression_risk(speech_score, hrv_score, behavior_score, history):
    # 当日综合情绪分
    daily_score = (speech_score*0.4 + hrv_score*0.3 + behavior_score*0.3)
    
    # 滚动7天趋势（LSTM模型）
    weekly_series = history[-7:] + [daily_score]
    risk_prob = lstm_depression_model.predict(weekly_series)
    
    # 风险等级分级
    if risk_prob > 0.7: return 'RED'
    elif risk_prob > 0.5: return 'ORANGE'
    elif risk_prob > 0.3: return 'YELLOW'
    else: return 'GREEN'
```

**3.3 危机语言检测**
- 关键词+语义分析：检测表达绝望（"活着没意思"）、死亡念头（"不如死了算了"）等语言
- 检测到后：立即暂停常规流程，温和回应（"我听到您说了一些让我担心的话..."），同时静默通知家属和急救联系人
- 避免直接质问（"您是否有自杀念头"），采用非直接但有效的引导

### 4. 用户交互设计

**每日对话示例（早晨）**
```
音箱："早上好，昨晚睡得怎么样？"
老人："一般，半夜醒了好几次"
音箱（SER检测到语调低沉）："那挺辛苦的，是睡前想事情了吗？" 
老人："想着我那个老伴..."（悲伤情绪）
音箱："想念他/她是很自然的。今天想不想听听您当年喜欢的歌？"
（悄悄记录：悲伤+睡眠差，今日风险黄色）
```

**家属APP通知示例**
- 普通推送（每周）："本周妈妈情绪评分：72分，状态稳定，比上周改善5分"
- 预警推送：⚠️"爸爸连续5天情绪评分偏低，建议近期上门探视或多通话"
- 紧急推送：🆘"系统检测到妈妈有一些令人担心的表达，请立即联系她"

### 5. 商业化路径与技术风险

**商业化路径**
- **硬件套装**（音箱+腕带）：980元
- **订阅**：99元/月（AI情绪评估+家属仪表盘+月度心理健康报告）
- **B端**：社区卫生中心"智慧老年心理健康管理"项目，政府采购潜力大
- **保险合作**：心理健康险配套设备，作为理赔触发前早期干预工具

**技术风险评估**

| 风险 | 等级 | 应对措施 |
|------|------|----------|
| 老年人对"被监视"反感 | 高 | 透明告知（系统监测内容）+ 老人可随时关闭 + 强调隐私保护（不留录音） |
| 语音情绪识别准确率不足 | 高 | 多模态融合（单一语音不足以决策），以趋势变化而非单次结果作为预警依据 |
| 危机语言检测误报（老人在讲历史/小说内容） | 中 | 上下文感知，连续出现+结合HRV才触发告警，设置5秒延迟确认 |
| 方言语音情绪识别效果差 | 中 | 针对主要方言（粤语/闽南语/四川话）单独收集数据，专项模型微调 |
